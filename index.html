<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Trading Journal</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <header class="header">
            <h1>Crypto Trading Journal</h1>
            <div class="stats-dashboard">
                <div class="stats-section">
                    <h3>Overall Performance</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Total PnL:</span>
                            <span id="totalPnl" class="stat-value">$0.00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total Trades:</span>
                            <span id="totalTrades" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Win Rate:</span>
                            <span id="winRate" class="stat-value">0%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Avg Win:</span>
                            <span id="avgWin" class="stat-value">$0.00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Avg Loss:</span>
                            <span id="avgLoss" class="stat-value">$0.00</span>
                        </div>
                    </div>
                </div>
                <div class="stats-section">
                    <h3>Scalp Performance</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">PnL:</span>
                            <span id="scalpPnl" class="stat-value">$0.00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Trades:</span>
                            <span id="scalpTrades" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Win Rate:</span>
                            <span id="scalpWinRate" class="stat-value">0%</span>
                        </div>
                    </div>
                </div>
                <div class="stats-section">
                    <h3>Swing Performance</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">PnL:</span>
                            <span id="swingPnl" class="stat-value">$0.00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Trades:</span>
                            <span id="swingTrades" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Win Rate:</span>
                            <span id="swingWinRate" class="stat-value">0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="main-content">
            <section class="left-panel">
                <div class="form-container">
                    <h2>Add New Trade</h2>
                    <form id="tradeForm">
                        <div class="form-group">
                            <label for="tradeSetup">Trade Type & Setup *</label>
                            <select id="tradeSetup" required>
                                <option value="">Select trade setup...</option>
                                <optgroup label="Scalp">
                                    <option value="Scalp: G">G - GEX</option>
                                    <option value="Scalp: W">W - Wall Frontrun</option>
                                    <option value="Scalp: T">T - Technical</option>
                                    <option value="Scalp: V">V - Velodata</option>
                                    <option value="Scalp: Other">Other - Experimental/Unclassified</option>
                                </optgroup>
                                <optgroup label="Swing">
                                    <option value="Swing: PB">PB - Pattern Break</option>
                                    <option value="Swing: N">N - Narrative</option>
                                    <option value="Swing: I">I - Inspired</option>
                                </optgroup>
                            </select>
                            <div class="tooltip">Choose your trade type and specific setup pattern</div>
                        </div>

                        <div class="form-group">
                            <label for="ticker">Ticker *</label>
                            <input type="text" id="ticker" placeholder="e.g. BTCUSDT" required maxlength="15" />
                            <div class="tooltip">Enter the asset ticker symbol</div>
                        </div>

                        <div class="form-group">
                            <label for="rr">R:R Ratio *</label>
                            <input type="text" id="rr" placeholder="1.5:1" required pattern="^\d+(\.\d+)?:1$">
                            <div class="tooltip">Format: number:1 (e.g., 1:1, 1.3:1, 2.5:1)</div>
                            <div id="rrError" class="error-message"></div>
                        </div>

                        <div class="form-group">
                            <label for="pnl">PnL (USD) *</label>
                            <input type="number" id="pnl" step="0.01" placeholder="150.00" required>
                            <div class="tooltip">Profit/Loss in USD (use negative for losses)</div>
                        </div>

                        <!-- Changed for active management: now a free entry box -->
                        <div class="form-group">
                            <label for="activeMgmt">Active Management ($ saved/lost or N/A) *</label>
                            <input type="text" id="activeMgmt" placeholder="e.g. 25.50 or -10 or N/A" required>
                            <div class="tooltip">Type the $ amount saved/lost through active management or N/A for passive trades</div>
                        </div>

                        <div class="form-group">
                            <label for="execution">Execution Quality *</label>
                            <select id="execution" required>
                                <option value="">Rate execution quality...</option>
                                <option value="A">A - Properly planned and executed</option>
                                <option value="B">B - Small issues</option>
                                <option value="C">C - Mistakes were made</option>
                            </select>
                            <div class="tooltip">Self-assess your trade planning and execution quality</div>
                        </div>

                        <div class="form-group">
                            <label for="note">Notes (Optional)</label>
                            <textarea id="note" rows="3" placeholder="Additional context or observations..."></textarea>
                            <div class="tooltip">Optional qualitative remarks about the trade</div>
                        </div>

                        <button type="submit" class="submit-btn">Add Trade</button>
                        <button type="button" id="cancelEditBtn" class="cancel-btn" style="display:none;">Cancel Edit</button>
                    </form>
                </div>
            </section>

            <section class="right-panel">
                <div class="controls-section">
                    <h2>Data Management</h2>
                    <div class="control-buttons">
                        <button id="exportBtn" class="control-btn">Export CSV</button>
                        <label for="importFile" class="control-btn">Import CSV</label>
                        <input type="file" id="importFile" accept=".csv" style="display: none;">
                        <button id="clearBtn" class="control-btn danger">Clear All Data</button>
                    </div>
                    <div id="importStatus" class="status-message"></div>
                </div>

                <div class="history-section">
                    <h2>Trade History</h2>
                    <div class="table-container">
                        <table id="tradesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Date</th>
                                    <th>Ticker</th>
                                    <th>Setup</th>
                                    <th>R:R</th>
                                    <th>PnL</th>
                                    <th>Active Mgmt</th>
                                    <th>Execution</th>
                                    <th>Note</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="tradesTableBody">
                                <!-- Trade rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                        <div id="noTrades" class="no-data">No trades recorded yet. Add your first trade!</div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <script src="script.js"></script>
</body>
</html>
